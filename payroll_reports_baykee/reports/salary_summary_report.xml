<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="payroll_reports_baykee.salary_summary_report">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <div class="header" style="border-bottom:1px solid black;font-size:11px;">
                        <div class="row">
                            <div class="col-5 text-left" name="expiration_date">
                                <img t-if="company_id.logo" t-att-src="image_data_uri(company_id.logo)"
                                     style="height:100px;width:250px;margin-bottom:15px"/>
                            </div>
                            <div class="col-7" name="signature">
                                <p style="font-size:20px;font-weight:bold;color:#000000;font-family: 'Segoe UI', Arial, sans-serif;text-align:right;width:100%;margin:auto;padding:45px"
                                   t-esc="company_id.partner_id.name"/>
                            </div>
                        </div>
                    </div>
                    <div class="article" style="font-size:11px;" t-att-data-oe-model="o and o._name"
                         t-att-data-oe-id="o and o.id" t-att-data-oe-lang="o and o.env.context.get('lang')">
                        <div class="row">
                            <div class="col-12 text-center">
                                <h3 t-if="type == 'emp'">Employee Wise Salary Summary</h3>
                                <h3 t-if="type == 'dpt'">Department Wise Salary Summary</h3>
                                <br/>
                            </div>
                        </div>
                        <table class="table table-bordered mb64" style="width:100%;">
                            <tr style="background-color:#f48531;color:white;">
                                <th style="text-align:center; width:2%;" rowspan="2">Sr#</th>
                                <th style="text-align:center; width:13%;" rowspan="2">Employee</th>
                                <th style="text-align:center; width:10%;" rowspan="2">Designation</th>
                                <th style="text-align:center; width:10%;" rowspan="2">Department</th>
                                <th style="text-align:center; width:5%;" rowspan="2">Basic Salary</th>
                                <th style="text-align:center; width:5%;" rowspan="2">Days Absent</th>
                                <th style="text-align:center; width:5%;" rowspan="2">Days Working</th>
                                <th style="text-align:center; width:5%;" rowspan="2">Gross Salary</th>
                                <th colspan="10" style="text-align:center;">Deductions</th>
                                <th style="text-align:center; width:5%;" rowspan="2">Net Salary</th>
                            </tr>
                            <tr style="background-color:#f48531;color:white;">
                                <th style="text-align:center; width:5%;">Tax</th>
                                <th style="text-align:center; width:5%;">Advance Salary</th>
                                <th style="text-align:center; width:5%;">Loan</th>
                                <th style="text-align:center; width:5%;">Mobile Bill</th>
                                <th style="text-align:center; width:5%;">EOBI</th>
                                <th style="text-align:center; width:5%;">PF</th>
                                <th style="text-align:center; width:5%;">Absent Deduction</th>
                                <th style="text-align:center; width:5%;">Late Deduction</th>
                                <th style="text-align:center; width:5%;">Short Leave Deduction</th>
                                <th style="text-align:center; width:5%;">Half Leave Deduction</th>
                            </tr>
                            <t t-set="i" t-value="1"/>
                            <t t-foreach="dat" t-as="data_line">
                                <t t-foreach="data_line[0]" t-as="m">
                                    <tr style="font-size:12px;">
                                        <td style="text-align:center">
                                            <span t-esc="i"/>
                                        </td>
                                        <td style="text-align:left">
                                            <span t-esc="m['employee']"/>
                                        </td>
                                        <td style="text-align:left">
                                            <span t-esc="m['desig']"/>
                                        </td>
                                        <td style="text-align:left">
                                            <span t-esc="m['depart']"/>
                                        </td>
                                        <td style="text-align:right">
                                            <span t-esc="'{:,.1f}'.format(m['basic'])"/>
                                        </td>
                                        <td style="text-align:right">
                                            <span t-esc="m['absent_days']"/>
                                        </td>
                                        <td style="text-align:right">
                                            <span t-esc="m['days_working']"/>
                                        </td>
                                        <td style="text-align:right">
                                            <t t-esc="'{:,.1f}'.format(m['gross'])"/>
                                        </td>
                                        <td style="text-align:right">
                                            <span t-esc="'{:,.1f}'.format(m['tax'])"/>
                                        </td>
                                        <td style="text-align:right">
                                            <span t-esc="'{:,.1f}'.format(m['advance_sal'])"/>
                                        </td>
                                        <td style="text-align:right">
                                            <span t-esc="'{:,.1f}'.format(m['loan'])"/>
                                        </td>
                                        <td style="text-align:right">
                                            <span t-esc="'{:,.1f}'.format(m['mobile_bill'])"/>
                                        </td>
                                        <td style="text-align:right">
                                            <span t-esc="'{:,.1f}'.format(m['EOBI_deduction'])"/>
                                        </td>
                                        <td style="text-align:right">
                                            <span t-esc="'{:,.1f}'.format(m['PF_deduction'])"/>
                                        </td>
                                        <td style="text-align:right">
                                            <span t-esc="'{:,.1f}'.format(m['absent_deduction'])"/>
                                        </td>
                                        <td style="text-align:right">
                                            <span t-esc="'{:,.1f}'.format(m['late_deduction'])"/>
                                        </td>
                                        <td style="text-align:right">
                                            <span t-esc="'{:,.1f}'.format(m['short_leave_deduction'])"/>
                                        </td>
                                        <td style="text-align:right">
                                            <span t-esc="'{:,.1f}'.format(m['half_leave_deduction'])"/>
                                        </td>
                                        <td style="text-align:right">
                                            <span t-esc="'{:,.1f}'.format(m['net'])"/>
                                        </td>
                                        <t t-set="i" t-value="i+1"/>
                                    </tr>
                                </t>
                            </t>
                            <tr style="background-color:#f48531;color:white;">
                                <t t-set="total_basic" t-value="0"/>
                                <t t-set="total_gross" t-value="0"/>
                                <t t-set="total_tax" t-value="0"/>
                                <t t-set="total_ad_sal" t-value="0"/>
                                <t t-set="total_loan" t-value="0"/>
                                <t t-set="total_mobile_bill" t-value="0"/>
                                <t t-set="total_eobi" t-value="0"/>
                                <t t-set="total_pf" t-value="0"/>
                                <t t-set="total_absent_deduct" t-value="0"/>
                                <t t-set="total_late_deduct" t-value="0"/>
                                <t t-set="total_short_deduct" t-value="0"/>
                                <t t-set="total_half_deduct" t-value="0"/>
                                <t t-set="total_net" t-value="0"/>
                                <t t-foreach="dat" t-as="total">

                                    <t t-foreach="total[0]" t-as="s">
                                        <t t-set="total_basic" t-value="total_basic+s['basic']"/>
                                        <t t-set="total_gross" t-value="total_gross+s['gross']"/>
                                        <t t-set="total_tax" t-value="total_tax+s['tax']"/>
                                        <t t-set="total_ad_sal" t-value="total_ad_sal+s['advance_sal']"/>
                                        <t t-set="total_loan" t-value="total_loan+s['loan']"/>
                                        <t t-set="total_mobile_bill" t-value="total_mobile_bill+s['mobile_bill']"/>
                                        <t t-set="total_eobi" t-value="total_eobi+s['EOBI_deduction']"/>
                                        <t t-set="total_pf" t-value="total_pf+s['PF_deduction']"/>
                                        <t t-set="total_absent_deduct"
                                           t-value="total_absent_deduct+s['absent_deduction']"/>
                                        <t t-set="total_late_deduct" t-value="total_late_deduct+s['late_deduction']"/>
                                        <t t-set="total_short_deduct"
                                           t-value="total_short_deduct+s['short_leave_deduction']"/>
                                        <t t-set="total_half_deduct"
                                           t-value="total_half_deduct+s['half_leave_deduction']"/>
                                        <t t-set="total_net" t-value="total_net+s['net']"/>
                                    </t>
                                </t>
                                <td class="text-right">
                                </td>
                                <td class="text-left" colspan="1">
                                    <b>Total</b>
                                </td>
                                <td class="text-right">
                                </td>
                                <td class="text-right">
                                </td>
                                <td class="text-right">
                                    <strong>
                                        <span t-esc="'{:,.2f}'.format(total_basic)"/>
                                    </strong>
                                </td>
                                <td class="text-right">
                                </td>
                                <td class="text-right">
                                </td>
                                <td class="text-right">
                                    <strong>
                                        <span t-esc="'{:,.2f}'.format(total_gross)"/>
                                    </strong>
                                </td>
                                <td class="text-right">
                                    <strong>
                                        <span t-esc="'{:,.2f}'.format(total_tax)"/>
                                    </strong>
                                </td>
                                <td class="text-right">
                                    <strong>
                                        <span t-esc="'{:,.2f}'.format(total_ad_sal)"/>
                                    </strong>
                                </td>
                                <td class="text-right">
                                    <strong>
                                        <span t-esc="'{:,.2f}'.format(total_loan)"/>
                                    </strong>
                                </td>
                                <td class="text-right">
                                    <strong>
                                        <span t-esc="'{:,.2f}'.format(total_mobile_bill)"/>
                                    </strong>
                                </td>
                                <td class="text-right">
                                    <strong>
                                        <span t-esc="'{:,.2f}'.format(total_eobi)"/>
                                    </strong>
                                </td>
                                <td class="text-right">
                                    <strong>
                                        <span t-esc="'{:,.2f}'.format(total_pf)"/>
                                    </strong>
                                </td>
                                <td class="text-right">
                                    <strong>
                                        <span t-esc="'{:,.2f}'.format(total_absent_deduct)"/>
                                    </strong>
                                </td>
                                <td class="text-right">
                                    <strong>
                                        <span t-esc="'{:,.2f}'.format(total_late_deduct)"/>
                                    </strong>
                                </td>
                                <td class="text-right">
                                    <strong>
                                        <span t-esc="'{:,.2f}'.format(total_short_deduct)"/>
                                    </strong>
                                </td>
                                <td class="text-right">
                                    <strong>
                                        <span t-esc="'{:,.2f}'.format(total_half_deduct)"/>
                                    </strong>
                                </td>
                                <td class="text-right">
                                    <strong>
                                        <span t-esc="'{:,.2f}'.format(total_net)"/>
                                    </strong>
                                </td>
                            </tr>
                        </table>

                    </div>
<!--                    <div class="footer" style="border-top:1px dashed black;font-size:11px;">-->
<!--                        <div class="row">-->
<!--                            <div class="col-12">-->
<!--                                <p class="text-center" style="margin-left:25px">-->
<!--                                    <strong>Address:</strong>-->
<!--                                    <t t-if="company_id.street" t-esc="company_id.street"/>-->
<!--                                    <span t-if="company_id.city">-->
<!--                                        ,-->
<!--                                        <t t-esc="company_id.city"/>-->
<!--                                    </span>-->
<!--                                    <span t-if="company_id.country_id">-->
<!--                                        - -->
<!--                                        <t t-esc="company_id.country_id.name"/>-->
<!--                                    </span>-->
<!--                                </p>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <div class="row" style="margin-left:200px">-->
<!--                            <div class="col-12">-->
<!--                                <span class="text-center" style="margin-left:100px">-->
<!--                                    <strong>Mobile:</strong>-->
<!--                                    <span>-->
<!--                                        <t t-esc="company_id.mobile"/>-->
<!--                                    </span>-->
<!--                                </span>-->
<!--                                <span class="text-center" style="margin-left:100px">-->
<!--                                    <strong>Tel:</strong>-->
<!--                                    <span>-->
<!--                                        <t t-esc="company_id.phone"/>-->
<!--                                    </span>-->
<!--                                </span>-->
<!--                                <span class="text-center" style="margin-left:100px">-->
<!--                                    <strong>Web:</strong>-->
<!--                                    <span>-->
<!--                                        <t t-esc="company_id.website"/>-->
<!--                                    </span>-->
<!--                                </span>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
                </t>
            </t>
        </template>
    </data>
</odoo>
